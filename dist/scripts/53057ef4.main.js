!function(){var a=window.ExchangeRates=Ember.Application.create();a.APIKey="d5edefa7fba5427eb53875edfd944af7",a.CurrentRatesAPILocation="https://openexchangerates.org/api/latest.json?app_id="+a.APIKey,a.TwoMonthsAgo=moment().subtract("months",2).format("YYYY-MM-DD"),a.TwoMonthsAgoAPILocation="https://openexchangerates.org/api/historical/"+a.TwoMonthsAgo+".json?app_id="+a.APIKey}(),function(){ExchangeRates.ApplicationController=Ember.Controller.extend({})}(),function(){ExchangeRates.IndexController=Ember.Controller.extend({currencies:function(){return Object.keys(this.get("content.current"))}.property(),currencySelected:"EUR",amountUSD:1,amountForeign:1,dateToday:function(){return moment().format("MMMM Do, YYYY")}.property(),dateTwoMonthsAgo:function(){return moment().subtract("months",2).format("MMMM Do, YYYY")}.property(),foreignRate:function(){return this.get("content.current."+this.get("currencySelected"))}.property("currencySelected","content"),foreignRateTwoMonthsAgo:function(){return this.get("content.twoMonthsAgo."+this.get("currencySelected"))}.property("currencySelected","content"),USDToForeign:function(){return this.get("amountUSD")*this.get("foreignRate")}.property("amountUSD","currencySelected"),ForeignToUSD:function(){return this.get("amountForeign")/this.get("foreignRate")}.property("amountForeign","foreignRate"),newExpenseDescription:null,newExpenseCost:0,newExpenseCostInCurrentUSD:function(){return this.get("newExpenseCost")/this.get("foreignRate")}.property("newExpenseCost","foreignRate"),newExpenseCostInTwoMonthsAgoUSD:function(){return this.get("newExpenseCost")/this.get("foreignRateTwoMonthsAgo")}.property("newExpenseCost","foreignRateTwoMonthsAgo"),canSubmitNewForm:function(){return this.get("newExpenseDescription")&&this.get("newExpenseCost")}.property("newExpenseDescription","newExpenseCost"),expenses:Em.A([]),expenseList:function(){var a=[];return this.get("expenses").forEach(function(b){a.push(b)}),a}.property("expenses.@each"),totalInUSDToday:function(){return this.get("expenses").reduce(function(a,b){return a+b.amountInUSDToday},0)}.property("expenses.@each"),totalInUSDTwoMonthsAgo:function(){return this.get("expenses").reduce(function(a,b){return a+b.amountInUSDTwoMonthsAgo},0)}.property("expenses.@each"),totalInForeignCurrency:function(){return this.get("expenses").reduce(function(a,b){return a+b.amount},0)}.property("expenses.@each"),actions:{expenseSubmission:function(){var a={description:this.get("newExpenseDescription"),amount:parseFloat(this.get("newExpenseCost")),amountInUSDToday:this.get("newExpenseCostInCurrentUSD"),amountInUSDTwoMonthsAgo:this.get("newExpenseCostInTwoMonthsAgoUSD"),foreignCurrency:this.get("currencySelected"),exchangeRateToday:this.get("foreignRate"),exchangeRateTwoMonthsAgo:this.get("foreignRateTwoMonthsAgo")};this.set("newExpenseDescription",null),this.set("newExpenseCost",0);var b=Em.A(this.get("expenses"));b.push(a),this.set("expenses",null),this.set("expenses",b)}}})}(),function(){ExchangeRates.Expense=Ember.Object.extend({})}(),function(){ExchangeRates.ApplicationRoute=Ember.Route.extend({})}(),function(){ExchangeRates.IndexRoute=Ember.Route.extend({model:function(){return localStorage.rates?(console.log("Pulling from localStorage."),JSON.parse(localStorage.rates)):Em.$.getJSON(ExchangeRates.CurrentRatesAPILocation).then(function(a){var b={current:a.rates};return Em.$.getJSON(ExchangeRates.TwoMonthsAgoAPILocation).then(function(a){return b.twoMonthsAgo=a.rates,localStorage.rates=JSON.stringify(b),b})})},setupController:function(a,b){a.set("model",b)}})}(),function(){ExchangeRates.CurrencyConverter=Ember.View.extend({templateName:"converter"})}(),function(){ExchangeRates.CurrencyField=Ember.View.extend({tagName:"div",template:Ember.Handlebars.compile('{{view ExchangeRates.NumberField type="number" min="0" class="form-control" value=amount}}'),classNameBindings:["hasError"],amount:function(){return console.log(this.get("value")),this.get("value")}.property("value"),hasError:function(){return!this.get("amount")}.property("amount")})}(),function(){ExchangeRates.CurrencySelector=Ember.View.extend({templateName:"selector"})}(),function(){ExchangeRates.ExpenseForm=Ember.View.extend({templateName:"expense/form"})}(),function(){ExchangeRates.ExpenseInfo=Ember.View.extend({templateName:"expense/info"})}(),function(){ExchangeRates.ExpenseLog=Ember.View.extend({templateName:"expense/log"})}(),function(){ExchangeRates.NumberField=Ember.TextField.extend({type:"number",attributeBindings:["min","max","step"],classNames:["form-control"]})}(),function(){Ember.Handlebars.helper("formatCurrency",function(a){if(!a)return"0.00";var b=a.toString().slice(0,4);if(b.length>4)return b;var c=b.match(/^(\d+)$/);c&&(b+=".00");var d=b.match(/^(\d+)\.\d$/);return d&&(b+="0"),b})}(),function(){ExchangeRates.Router.map(function(){})}();